{{define "smzdmview"}}
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="referrer" content="no-referrer" />
    <title>什么值得买</title>
    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css"
      integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
      crossorigin="anonymous"
    />

    <style>
      body {
        background-color: #f5f5f5;
      }
      .container {
        padding-top: 20px;
        background-color: white;
      }
      .media {
        padding: 10px;
      }
      .media img {
        width: 200px;
        height: 200px;
      }
      .x-num span {
        margin-right: 10px;
      }
      .x-worthy {
        color: green;
      }
      .x-unworthy {
        color: red;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="input-group mb-3 col-xl-12 x-head">
        <input type="text" class="form-control" id="kw" />
        <div class="input-group-append">
          <button
            class="btn btn-outline-secondary"
            type="button"
            onclick="list(0);"
          >
            Go
          </button>
        </div>
      </div>
      <div class="row">
        <ul class="list-unstyled col-xl-12" id="ul">
          <li class="media" style="display: none" id="li">
            <img
              referrer="no-referrer|origin|unsafe-url"
              src=""
              class="mr-3"
              alt=""
            />
            <div class="media-body">
              <h5 class="mt-0 mb-1"><a class="x-a-url" target="_blank"></a></h5>
              <p class="x-price"></p>
              <p class="x-num">
                <span class="badge badge-primary x-worthy-rate"></span>
                <svg
                  width="1em"
                  height="1em"
                  viewBox="0 0 16 16"
                  class="bi bi-emoji-smile"
                  fill="currentColor"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"
                  />
                  <path
                    fill-rule="evenodd"
                    d="M4.285 9.567a.5.5 0 0 1 .683.183A3.498 3.498 0 0 0 8 11.5a3.498 3.498 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.498 4.498 0 0 1 8 12.5a4.498 4.498 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683z"
                  />
                  <path
                    d="M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5z"
                  />
                </svg>
                <span class="x-worthy"></span>
                <svg
                  width="1em"
                  height="1em"
                  viewBox="0 0 16 16"
                  class="bi bi-emoji-frown"
                  fill="currentColor"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"
                  />
                  <path
                    fill-rule="evenodd"
                    d="M4.285 12.433a.5.5 0 0 0 .683-.183A3.498 3.498 0 0 1 8 10.5c1.295 0 2.426.703 3.032 1.75a.5.5 0 0 0 .866-.5A4.498 4.498 0 0 0 8 9.5a4.5 4.5 0 0 0-3.898 2.25.5.5 0 0 0 .183.683z"
                  />
                  <path
                    d="M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5z"
                  />
                </svg>
                <span class="x-unworthy"></span>
                <svg
                  width="1em"
                  height="1em"
                  viewBox="0 0 16 16"
                  class="bi bi-heart"
                  fill="currentColor"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    d="M8 2.748l-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"
                  />
                </svg>
                <span class="x-collection"></span>
                <svg
                  width="1em"
                  height="1em"
                  viewBox="0 0 16 16"
                  class="bi bi-chat-left-dots"
                  fill="currentColor"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    d="M14 1H2a1 1 0 0 0-1 1v11.586l2-2A2 2 0 0 1 4.414 11H14a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 0a2 2 0 0 0-2 2v12.793a.5.5 0 0 0 .854.353l2.853-2.853A1 1 0 0 1 4.414 12H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"
                  />
                  <path
                    d="M5 6a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"
                  />
                </svg>
                <span class="x-comment"></span>
              </p>
              <p class="x-url">
                <a class="x-a-link" target="_blank"></a>
              </p>
              <p class="x-time"></p>
            </div>
          </li>
        </ul>
      </div>
      <div class="row">
        <div class="col-xl-12" style="text-align: center; padding: 10px">
          <button
            type="button"
            class="btn btn-primary"
            style="width: 100%"
            onclick="list();"
          >
            更多...
          </button>
        </div>
      </div>
    </div>

    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"
      integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
      crossorigin="anonymous"
    ></script>

    <script>
      $(function () {
        $("#kw").on("keydown", function (event) {
          if (event.keyCode == 13) {
            list(reset);
          }
        });
        list();
      });

      var _offset = 0,
        _limit = 20;
      function list(reset) {
        if (reset === 0) {
          _offset = 0;
          $("#ul li:visible").remove();
        }
        $.getJSON(
          "list?offset=" +
            _offset +
            "&limit=" +
            _limit +
            "&search=" +
            $("#kw").val(),
          function (res) {
            $.each(res.rows, function (i, n) {
              var ele = $("#li").clone();
              ele.attr("id", "");
              ele.find("img").attr("src", n.article_pic_url);
              ele
                .find(".x-a-url")
                .attr("href", n.article_url)
                .text(n.article_title);
              ele.find(".x-price").text(n.article_price);
              ele
                .find(".x-worthy-rate")
                .text(calRate(n.article_worthy, n.article_unworthy) + "%");
              ele.find(".x-worthy").text(n.article_worthy);
              ele.find(".x-unworthy").text(n.article_unworthy);
              ele.find(".x-collection").text(n.article_collection);
              ele.find(".x-comment").text(n.article_comment);
              ele
                .find(".x-a-link")
                .attr("href", n.article_link)
                .text(n.article_mall);
              ele.find(".x-time").text(n.Time);
              $("#ul").append(ele.show());
            });
          }
        );
        _offset += _limit;
      }

      function calRate(a, b) {
        return a + b == 0 ? 0 : ((100 * a) / (a + b)).toFixed(0);
      }
    </script>
  </body>
</html>
{{end}}
